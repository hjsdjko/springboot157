"use strict";(self["webpackChunkvue3_nb0"]=self["webpackChunkvue3_nb0"]||[]).push([[439],{8439:(e,l,a)=>{a.r(l),a.d(l,{default:()=>V});a(63134);var t=a(67377),u=a(98479),i=a(51290),n=function(e){return(0,t.dD)("data-v-8725b132"),e=e(),(0,t.Cn)(),e},o={class:"forget_view"},s={class:"forget_title"},r={class:"tab_view"},v={key:0,class:"list_item"},c=n((function(){return(0,t._)("div",{class:"item_label"},"账号：",-1)})),d={key:1,class:"list_item"},m=n((function(){return(0,t._)("div",{class:"item_label"},"密保问题：",-1)})),_={key:2,class:"list_item"},p=n((function(){return(0,t._)("div",{class:"item_label"},"密保答案：",-1)})),f={key:3,class:"list_item"},g=n((function(){return(0,t._)("div",{class:"item_label"},"密码：",-1)})),k={key:4,class:"list_item"},w=n((function(){return(0,t._)("div",{class:"item_label"},"确认密码：",-1)})),b={class:"list_btn"};const y={__name:"forget",setup:function(e){var l,a=null===(l=(0,t.FN)())||void 0===l?void 0:l.appContext.config.globalProperties,n=(0,i.iH)(1),y=(0,i.iH)({}),h=(0,i.iH)({}),U=function(){return y.value.role="yonghu",y.value.role?y.value.username?void(null===a||void 0===a||a.$http({url:y.value.role+"/security?username=".concat(y.value.username),method:"get"}).then((function(e){e.data.data?(h.value=e.data.data,n.value=2):null===a||void 0===a||a.$toolUtil.message("未获取到用户信息","error")}))):(null===a||void 0===a||a.$toolUtil.message("请输入账号","error"),!1):(null===a||void 0===a||a.$toolUtil.message("请选择角色","error"),!1)},V=function(){if(h.value.panswer!=y.value.myanswer)return null===a||void 0===a||a.$toolUtil.message("答案输入不正确","error"),!1;null===a||void 0===a||a.$toolUtil.message("答案正确","success",(function(){n.value=3}))},C=function(){if(y.value.mima!=y.value.mima2)return null===a||void 0===a||a.$toolUtil.message("两次密码输入不一致","error"),!1;h.value.mima=y.value.mima,h.value.password=y.value.mima,null===a||void 0===a||a.$http({url:y.value.role+"/update",method:"post",data:h.value}).then((function(e){null===a||void 0===a||a.$toolUtil.message("修改密码成功","success",(function(e){q()}))}))},q=function(){null===a||void 0===a||a.$router.push({path:"/login"})};return function(e,l){var a=(0,t.up)("el-input"),i=(0,t.up)("el-button"),$=(0,t.up)("el-form");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("div",o,[(0,t.Wm)($,{model:y.value,class:"forget_box"},{default:(0,t.w5)((function(){return[(0,t._)("div",s,"小区物业管理系统"+(0,u.zw)(1==n.value?"找回密码":2==n.value?"输入密保":"重置密码"),1),(0,t._)("div",r,[(0,t._)("div",{class:(0,u.C_)(["tab",1==n.value?"tab_active":""])},"找回密码",2),(0,t._)("div",{class:(0,u.C_)(["tab",2==n.value?"tab_active tab_active1":""])},"输入密保",2),(0,t._)("div",{class:(0,u.C_)(["tab",3==n.value?"tab_active tab_active1 tab_active2":""])},"重置密码",2)]),1==n.value?((0,t.wg)(),(0,t.iD)("div",v,[c,(0,t.Wm)(a,{class:"list_inp",modelValue:y.value.username,"onUpdate:modelValue":l[0]||(l[0]=function(e){return y.value.username=e}),placeholder:"请输入账号"},null,8,["modelValue"])])):(0,t.kq)("",!0),2==n.value?((0,t.wg)(),(0,t.iD)("div",d,[m,(0,t.Wm)(a,{class:"list_inp",modelValue:h.value.pquestion,"onUpdate:modelValue":l[1]||(l[1]=function(e){return h.value.pquestion=e}),placeholder:"请输入密保问题"},null,8,["modelValue"])])):(0,t.kq)("",!0),2==n.value?((0,t.wg)(),(0,t.iD)("div",_,[p,(0,t.Wm)(a,{class:"list_inp",modelValue:y.value.myanswer,"onUpdate:modelValue":l[2]||(l[2]=function(e){return y.value.myanswer=e}),placeholder:"请输入密保答案"},null,8,["modelValue"])])):(0,t.kq)("",!0),3==n.value?((0,t.wg)(),(0,t.iD)("div",f,[g,(0,t.Wm)(a,{class:"list_inp",modelValue:y.value.mima,"onUpdate:modelValue":l[3]||(l[3]=function(e){return y.value.mima=e}),type:"password",placeholder:"请输入密码"},null,8,["modelValue"])])):(0,t.kq)("",!0),3==n.value?((0,t.wg)(),(0,t.iD)("div",k,[w,(0,t.Wm)(a,{class:"list_inp",modelValue:y.value.mima2,"onUpdate:modelValue":l[4]||(l[4]=function(e){return y.value.mima2=e}),type:"password",placeholder:"请输入确认密码"},null,8,["modelValue"])])):(0,t.kq)("",!0),(0,t._)("div",b,[1==n.value?((0,t.wg)(),(0,t.j4)(i,{key:0,type:"success",onClick:U},{default:(0,t.w5)((function(){return[(0,t.Uk)("获取密保")]})),_:1})):(0,t.kq)("",!0),2==n.value?((0,t.wg)(),(0,t.j4)(i,{key:1,type:"primary",onClick:V},{default:(0,t.w5)((function(){return[(0,t.Uk)("确认密保")]})),_:1})):(0,t.kq)("",!0),3==n.value?((0,t.wg)(),(0,t.j4)(i,{key:2,type:"warning",onClick:C},{default:(0,t.w5)((function(){return[(0,t.Uk)("重置密码")]})),_:1})):(0,t.kq)("",!0),(0,t._)("div",{class:"r-login",onClick:q},"已有账号，直接登录")])]})),_:1},8,["model"])])])}}};var h=a(57326);const U=(0,h.Z)(y,[["__scopeId","data-v-8725b132"]]),V=U}}]);
//# sourceMappingURL=439.5722b942.js.map